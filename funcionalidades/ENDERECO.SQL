
--======================================ENDERECO==========================================--
-- REGISTRAR ENDERECO
CREATE OR REPLACE FUNCTION REGISTRAR_ENDERECO_NO_BANCO_DE_DADOS(
	CEP VARCHAR,
	RUA VARCHAR,
	NUMERO INT,
	COMPLEMENTO VARCHAR,
	CIDADE VARCHAR,
	UF VARCHAR
)
RETURNS INT AS $$ 
DECLARE
ENDEREC_ID INT;
BEGIN
	INSERT INTO ENDERECO(CEP, RUA, NUMERO, COMPLEMENTO, CIDADE, UF)
	VALUES (CEP, RUA, NUMERO, COMPLEMENTO, CIDADE, UF)
	RETURNING ID_ENDERECO INTO ENDEREC_ID;
	RAISE INFO 'ENDERECO REGISTRADO COM SUCESSO!';
	RETURN ENDEREC_ID;
END 
$$ LANGUAGE PLPGSQL;


-- VERIFICAR ENDERECO
CREATE OR REPLACE FUNCTION ENDERECO_EXISTE(ENDERECO_ID INT) 
RETURNS BOOLEAN AS $$
DECLARE
    QTD_RESULTADOS INT;
BEGIN

    SELECT COUNT(ID_ENDERECO) FROM ENDERECO 
    WHERE ID_ENDERECO = ENDERECO_ID
    INTO QTD_RESULTADOS;

    RETURN QTD_RESULTADOS > 0;

END;
$$ LANGUAGE PLPGSQL;

CREATE OR REPLACE FUNCTION CADASTRAR_PRODUTO(NOME VARCHAR, DESCRICAO VARCHAR)
RETURNS VOID AS $$
BEGIN

    IF (NOME IS NULL) THEN
        RAISE EXCEPTION 'INFORME O NOME DO PRODUTO';
    ELSIF (DESCRICAO IS NULL) THEN
        RAISE EXCEPTION 'INFORME A DESCRIÇÃO DO PRODUTO';
    ELSIF (LENGTH(NOME) < 5) THEN
        RAISE EXCEPTION 'O NOME DO PRODUTO DEVE CONTER PELO MENOS 5 CARACTERES';
    ELSE
        INSERT INTO PRODUTO(NOME, DESCRICAO)
        VALUES (NOME, DESCRICAO);
        RAISE INFO 'PRODUTO CADASTARDO COM SUCESSO';
    END IF;

END;
$$ LANGUAGE PLPGSQL;

--===========================================================================================--
CREATE OR REPLACE FUNCTION VERIFICA_EXISTENCIA_DE_PRODUTO(PRODUTO_ID INT)
RETURNS BOOLEAN AS $$
DECLARE
    QTD_RESULTADOS INT;
BEGIN
    IF (PRODUTO_ID IS NULL) THEN
        RAISE EXCEPTION 'INFORME O ID DO PRODUTO';
    END IF;
    
    SELECT COUNT(ID_PRODUTO) FROM PRODUTO 
    WHERE ID_PRODUTO = PRODUTO_ID 
    INTO QTD_RESULTADOS;

    RETURN QTD_RESULTADOS > 0;
END;
$$ LANGUAGE PLPGSQL;

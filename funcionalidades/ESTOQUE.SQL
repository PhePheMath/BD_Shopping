

--====================================ESTOQUE==============================================--
-- VERIFICAR ESTOQUE
CREATE OR REPLACE FUNCTION VERIFICAR_ESTOQUE_DO_PRODUTO(PRODUTO_LOJA_ID INT, QTD INT)
RETURNS BOOLEAN AS $$
DECLARE
    HA_ESTOQUE BOOLEAN DEFAULT FALSE;
BEGIN
    SELECT QUANTIDADE >= QTD FROM PRODUTO_LOJA 
    WHERE ID_PRODUTO_LOJA = PRODUTO_LOJA_ID 
    INTO HA_ESTOQUE;

    RETURN HA_ESTOQUE;
END;
$$ LANGUAGE PLPGSQL;